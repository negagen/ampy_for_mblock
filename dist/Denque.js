!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Denque=i():t.Denque=i()}(this,(()=>(()=>{"use strict";var t=[,t=>{function i(t,i){i=i||{},this._capacity=i.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}i.prototype.peekAt=function(t){var i=t;if(i===(0|i)){var s=this.size();if(!(i>=s||i<-s))return i<0&&(i+=s),i=this._head+i&this._capacityMask,this._list[i]}},i.prototype.get=function(t){return this.peekAt(t)},i.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},i.prototype.peekFront=function(){return this.peek()},i.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(i.prototype,"length",{get:function(){return this.size()}}),i.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},i.prototype.unshift=function(t){if(0===arguments.length)return this.size();var i=this._list.length;return this._head=this._head-1+i&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},i.prototype.shift=function(){var t=this._head;if(t!==this._tail){var i=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),i}},i.prototype.push=function(t){if(0===arguments.length)return this.size();var i=this._tail;return this._list[i]=t,this._tail=i+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},i.prototype.pop=function(){var t=this._tail;if(t!==this._head){var i=this._list.length;this._tail=t-1+i&this._capacityMask;var s=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=i>>>2&&this._shrinkArray(),s}},i.prototype.removeOne=function(t){var i=t;if(i===(0|i)&&this._head!==this._tail){var s=this.size(),h=this._list.length;if(!(i>=s||i<-s)){i<0&&(i+=s),i=this._head+i&this._capacityMask;var a,e=this._list[i];if(t<s/2){for(a=t;a>0;a--)this._list[i]=this._list[i=i-1+h&this._capacityMask];this._list[i]=void 0,this._head=this._head+1+h&this._capacityMask}else{for(a=s-1-t;a>0;a--)this._list[i]=this._list[i=i+1+h&this._capacityMask];this._list[i]=void 0,this._tail=this._tail-1+h&this._capacityMask}return e}}},i.prototype.remove=function(t,i){var s,h=t,a=i;if(h===(0|h)&&this._head!==this._tail){var e=this.size(),r=this._list.length;if(!(h>=e||h<-e||i<1)){if(h<0&&(h+=e),1===i||!i)return(s=new Array(1))[0]=this.removeOne(h),s;if(0===h&&h+i>=e)return s=this.toArray(),this.clear(),s;var _;for(h+i>e&&(i=e-h),s=new Array(i),_=0;_<i;_++)s[_]=this._list[this._head+h+_&this._capacityMask];if(h=this._head+h&this._capacityMask,t+i===e){for(this._tail=this._tail-i+r&this._capacityMask,_=i;_>0;_--)this._list[h=h+1+r&this._capacityMask]=void 0;return s}if(0===t){for(this._head=this._head+i+r&this._capacityMask,_=i-1;_>0;_--)this._list[h=h+1+r&this._capacityMask]=void 0;return s}if(h<e/2){for(this._head=this._head+t+i+r&this._capacityMask,_=t;_>0;_--)this.unshift(this._list[h=h-1+r&this._capacityMask]);for(h=this._head-1+r&this._capacityMask;a>0;)this._list[h=h-1+r&this._capacityMask]=void 0,a--;t<0&&(this._tail=h)}else{for(this._tail=h,h=h+i+r&this._capacityMask,_=e-(i+t);_>0;_--)this.push(this._list[h++]);for(h=this._tail;a>0;)this._list[h=h+1+r&this._capacityMask]=void 0,a--}return this._head<2&&this._tail>1e4&&this._tail<=r>>>2&&this._shrinkArray(),s}}},i.prototype.splice=function(t,i){var s=t;if(s===(0|s)){var h=this.size();if(s<0&&(s+=h),!(s>h)){if(arguments.length>2){var a,e,r,_=arguments.length,o=this._list.length,n=2;if(!h||s<h/2){for(e=new Array(s),a=0;a<s;a++)e[a]=this._list[this._head+a&this._capacityMask];for(0===i?(r=[],s>0&&(this._head=this._head+s+o&this._capacityMask)):(r=this.remove(s,i),this._head=this._head+s+o&this._capacityMask);_>n;)this.unshift(arguments[--_]);for(a=s;a>0;a--)this.unshift(e[a-1])}else{var l=(e=new Array(h-(s+i))).length;for(a=0;a<l;a++)e[a]=this._list[this._head+s+i+a&this._capacityMask];for(0===i?(r=[],s!=h&&(this._tail=this._head+s+o&this._capacityMask)):(r=this.remove(s,i),this._tail=this._tail-l+o&this._capacityMask);n<_;)this.push(arguments[n++]);for(a=0;a<l;a++)this.push(e[a])}return r}return this.remove(s,i)}}},i.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},i.prototype.isEmpty=function(){return this._head===this._tail},i.prototype.toArray=function(){return this._copyArray(!1)},i.prototype._fromArray=function(t){var i=t.length,s=this._nextPowerOf2(i);this._list=new Array(s),this._capacityMask=s-1,this._tail=i;for(var h=0;h<i;h++)this._list[h]=t[h]},i.prototype._copyArray=function(t,i){var s=this._list,h=s.length,a=this.length;if((i|=a)==a&&this._head<this._tail)return this._list.slice(this._head,this._tail);var e,r=new Array(i),_=0;if(t||this._head>this._tail){for(e=this._head;e<h;e++)r[_++]=s[e];for(e=0;e<this._tail;e++)r[_++]=s[e]}else for(e=this._head;e<this._tail;e++)r[_++]=s[e];return r},i.prototype._growArray=function(){if(0!=this._head){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},i.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},i.prototype._nextPowerOf2=function(t){var i=1<<Math.log(t)/Math.log(2)+1;return Math.max(i,4)},t.exports=i}],i={};return function s(h){var a=i[h];if(void 0!==a)return a.exports;var e=i[h]={exports:{}};return t[h](e,e.exports,s),e.exports}(1)})()));